<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>16 Internet data | R Textbook</title>
  <meta name="description" content="This is the ‘organic’ textbook created by our class discussions and exercises.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="16 Internet data | R Textbook" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is the ‘organic’ textbook created by our class discussions and exercises." />
  <meta name="github-repo" content="iancero/r-textbook-spring2019" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="16 Internet data | R Textbook" />
  
  <meta name="twitter:description" content="This is the ‘organic’ textbook created by our class discussions and exercises." />
  

<meta name="author" content="Ian Cero’s CSP 518 Class">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="strings-and-text.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a></li>
<li class="chapter" data-level="2" data-path="basic-r.html"><a href="basic-r.html"><i class="fa fa-check"></i><b>2</b> Basic R</a><ul>
<li class="chapter" data-level="2.1" data-path="basic-r.html"><a href="basic-r.html#writing-in-r-and-rmarkdown"><i class="fa fa-check"></i><b>2.1</b> Writing in R and Rmarkdown</a><ul>
<li class="chapter" data-level="2.1.1" data-path="basic-r.html"><a href="basic-r.html#chatting-with-r"><i class="fa fa-check"></i><b>2.1.1</b> Chatting with R</a></li>
<li class="chapter" data-level="2.1.2" data-path="basic-r.html"><a href="basic-r.html#rmarkdown-tricks"><i class="fa fa-check"></i><b>2.1.2</b> Rmarkdown tricks</a></li>
<li class="chapter" data-level="2.1.3" data-path="basic-r.html"><a href="basic-r.html#code-blocks"><i class="fa fa-check"></i><b>2.1.3</b> Code blocks</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="basic-r.html"><a href="basic-r.html#variables"><i class="fa fa-check"></i><b>2.2</b> Variables</a><ul>
<li class="chapter" data-level="2.2.1" data-path="basic-r.html"><a href="basic-r.html#the-assignment-operator"><i class="fa fa-check"></i><b>2.2.1</b> The assignment operator</a></li>
<li class="chapter" data-level="2.2.2" data-path="basic-r.html"><a href="basic-r.html#numerics"><i class="fa fa-check"></i><b>2.2.2</b> Numerics</a></li>
<li class="chapter" data-level="2.2.3" data-path="basic-r.html"><a href="basic-r.html#characters"><i class="fa fa-check"></i><b>2.2.3</b> Characters</a></li>
<li class="chapter" data-level="2.2.4" data-path="basic-r.html"><a href="basic-r.html#booleans"><i class="fa fa-check"></i><b>2.2.4</b> Booleans</a></li>
<li class="chapter" data-level="2.2.5" data-path="basic-r.html"><a href="basic-r.html#special-types"><i class="fa fa-check"></i><b>2.2.5</b> Special types</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="basic-r.html"><a href="basic-r.html#vectors"><i class="fa fa-check"></i><b>2.3</b> Vectors</a></li>
<li class="chapter" data-level="2.4" data-path="basic-r.html"><a href="basic-r.html#lists"><i class="fa fa-check"></i><b>2.4</b> Lists</a></li>
<li class="chapter" data-level="2.5" data-path="basic-r.html"><a href="basic-r.html#dataframes"><i class="fa fa-check"></i><b>2.5</b> Dataframes</a><ul>
<li class="chapter" data-level="2.5.1" data-path="basic-r.html"><a href="basic-r.html#construction"><i class="fa fa-check"></i><b>2.5.1</b> Construction</a></li>
<li class="chapter" data-level="2.5.2" data-path="basic-r.html"><a href="basic-r.html#built-in-dataframes"><i class="fa fa-check"></i><b>2.5.2</b> Built-in dataframes</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="basic-r.html"><a href="basic-r.html#functions"><i class="fa fa-check"></i><b>2.6</b> Functions</a><ul>
<li class="chapter" data-level="2.6.1" data-path="basic-r.html"><a href="basic-r.html#getting-help"><i class="fa fa-check"></i><b>2.6.1</b> Getting help</a></li>
<li class="chapter" data-level="2.6.2" data-path="basic-r.html"><a href="basic-r.html#function-parameters"><i class="fa fa-check"></i><b>2.6.2</b> Function parameters</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="basic-r.html"><a href="basic-r.html#packages"><i class="fa fa-check"></i><b>2.7</b> Packages</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="visualization.html"><a href="visualization.html"><i class="fa fa-check"></i><b>3</b> Visualization</a><ul>
<li class="chapter" data-level="3.1" data-path="visualization.html"><a href="visualization.html#base-r"><i class="fa fa-check"></i><b>3.1</b> Base R</a></li>
<li class="chapter" data-level="3.2" data-path="visualization.html"><a href="visualization.html#ggplot"><i class="fa fa-check"></i><b>3.2</b> <code>ggplot</code></a><ul>
<li class="chapter" data-level="3.2.1" data-path="visualization.html"><a href="visualization.html#blank-ggplot-plot"><i class="fa fa-check"></i><b>3.2.1</b> Blank ggplot plot</a></li>
<li class="chapter" data-level="3.2.2" data-path="visualization.html"><a href="visualization.html#geoms"><i class="fa fa-check"></i><b>3.2.2</b> Geoms</a></li>
<li class="chapter" data-level="3.2.3" data-path="visualization.html"><a href="visualization.html#stat-functions"><i class="fa fa-check"></i><b>3.2.3</b> Stat Functions</a></li>
<li class="chapter" data-level="3.2.4" data-path="visualization.html"><a href="visualization.html#themes"><i class="fa fa-check"></i><b>3.2.4</b> Themes</a></li>
<li class="chapter" data-level="3.2.5" data-path="visualization.html"><a href="visualization.html#labels"><i class="fa fa-check"></i><b>3.2.5</b> Labels</a></li>
<li class="chapter" data-level="3.2.6" data-path="visualization.html"><a href="visualization.html#scales"><i class="fa fa-check"></i><b>3.2.6</b> Scales</a></li>
<li class="chapter" data-level="3.2.7" data-path="visualization.html"><a href="visualization.html#saving-your-plot"><i class="fa fa-check"></i><b>3.2.7</b> Saving your plot**</a></li>
<li class="chapter" data-level="3.2.8" data-path="visualization.html"><a href="visualization.html#facets"><i class="fa fa-check"></i><b>3.2.8</b> Facets</a></li>
<li class="chapter" data-level="3.2.9" data-path="visualization.html"><a href="visualization.html#where-to-learn-more"><i class="fa fa-check"></i><b>3.2.9</b> Where to learn more</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="functions-1.html"><a href="functions-1.html"><i class="fa fa-check"></i><b>4</b> Functions</a><ul>
<li class="chapter" data-level="4.1" data-path="functions-1.html"><a href="functions-1.html#basic-example"><i class="fa fa-check"></i><b>4.1</b> Basic Example</a></li>
<li class="chapter" data-level="4.2" data-path="functions-1.html"><a href="functions-1.html#anatomy-of-an-r-function"><i class="fa fa-check"></i><b>4.2</b> Anatomy of an R function</a></li>
<li class="chapter" data-level="4.3" data-path="functions-1.html"><a href="functions-1.html#base-r-functions"><i class="fa fa-check"></i><b>4.3</b> Base R functions</a><ul>
<li class="chapter" data-level="4.3.1" data-path="functions-1.html"><a href="functions-1.html#scoping"><i class="fa fa-check"></i><b>4.3.1</b> Scoping</a></li>
<li class="chapter" data-level="4.3.2" data-path="functions-1.html"><a href="functions-1.html#conditional-execution"><i class="fa fa-check"></i><b>4.3.2</b> Conditional execution</a></li>
<li class="chapter" data-level="4.3.3" data-path="functions-1.html"><a href="functions-1.html#the-return-command"><i class="fa fa-check"></i><b>4.3.3</b> the <code>return()</code> command</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="functions-1.html"><a href="functions-1.html#pipes"><i class="fa fa-check"></i><b>4.4</b> Pipes</a><ul>
<li class="chapter" data-level="4.4.1" data-path="functions-1.html"><a href="functions-1.html#basic-usage"><i class="fa fa-check"></i><b>4.4.1</b> Basic usage</a></li>
<li class="chapter" data-level="4.4.2" data-path="functions-1.html"><a href="functions-1.html#sending-the-lhs-to-another-parameter"><i class="fa fa-check"></i><b>4.4.2</b> Sending the LHS to another parameter</a></li>
<li class="chapter" data-level="4.4.3" data-path="functions-1.html"><a href="functions-1.html#convenient-magrittr-functions"><i class="fa fa-check"></i><b>4.4.3</b> Convenient magrittr functions</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="functions-1.html"><a href="functions-1.html#more-talk-about-the-help-files"><i class="fa fa-check"></i><b>4.5</b> More talk about the help files</a></li>
<li class="chapter" data-level="4.6" data-path="functions-1.html"><a href="functions-1.html#functions-from-other-packages"><i class="fa fa-check"></i><b>4.6</b> Functions from other packages</a></li>
<li class="chapter" data-level="4.7" data-path="functions-1.html"><a href="functions-1.html#section"><i class="fa fa-check"></i><b>4.7</b> </a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="dataframes-1.html"><a href="dataframes-1.html"><i class="fa fa-check"></i><b>5</b> Dataframes</a><ul>
<li class="chapter" data-level="5.1" data-path="dataframes-1.html"><a href="dataframes-1.html#storing-rectangular-data"><i class="fa fa-check"></i><b>5.1</b> Storing rectangular data</a><ul>
<li class="chapter" data-level="5.1.1" data-path="dataframes-1.html"><a href="dataframes-1.html#making-dataframes"><i class="fa fa-check"></i><b>5.1.1</b> Making dataframes</a></li>
<li class="chapter" data-level="5.1.2" data-path="dataframes-1.html"><a href="dataframes-1.html#strings-as-factors"><i class="fa fa-check"></i><b>5.1.2</b> Strings as factors</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="dataframes-1.html"><a href="dataframes-1.html#accessing-data-from-a-dataframe"><i class="fa fa-check"></i><b>5.2</b> Accessing data from a dataframe</a><ul>
<li class="chapter" data-level="5.2.1" data-path="dataframes-1.html"><a href="dataframes-1.html#basic-framework"><i class="fa fa-check"></i><b>5.2.1</b> Basic framework</a></li>
<li class="chapter" data-level="5.2.2" data-path="dataframes-1.html"><a href="dataframes-1.html#using-string-column-names"><i class="fa fa-check"></i><b>5.2.2</b> Using string column names</a></li>
<li class="chapter" data-level="5.2.3" data-path="dataframes-1.html"><a href="dataframes-1.html#using-the-operator"><i class="fa fa-check"></i><b>5.2.3</b> Using the <code>$</code> operator</a></li>
<li class="chapter" data-level="5.2.4" data-path="dataframes-1.html"><a href="dataframes-1.html#using-booleans"><i class="fa fa-check"></i><b>5.2.4</b> Using booleans</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="dataframes-1.html"><a href="dataframes-1.html#manupilating-data"><i class="fa fa-check"></i><b>5.3</b> Manupilating data</a></li>
<li class="chapter" data-level="5.4" data-path="dataframes-1.html"><a href="dataframes-1.html#using-dplyr-pipelines"><i class="fa fa-check"></i><b>5.4</b> Using <code>dplyr</code> pipelines</a><ul>
<li class="chapter" data-level="5.4.1" data-path="dataframes-1.html"><a href="dataframes-1.html#how-do-these-functions-work"><i class="fa fa-check"></i><b>5.4.1</b> How do these functions work?</a></li>
<li class="chapter" data-level="5.4.2" data-path="dataframes-1.html"><a href="dataframes-1.html#group_by"><i class="fa fa-check"></i><b>5.4.2</b> <code>group_by()</code></a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="dataframes-1.html"><a href="dataframes-1.html#dplyr-pipelines-with-the-magrittr"><i class="fa fa-check"></i><b>5.5</b> <code>dplyr</code> pipelines with the <code>magrittr</code> <code>%&gt;%</code></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="local-data-import-and-export.html"><a href="local-data-import-and-export.html"><i class="fa fa-check"></i><b>6</b> Local Data Import and Export</a><ul>
<li class="chapter" data-level="6.1" data-path="local-data-import-and-export.html"><a href="local-data-import-and-export.html#basic-exportation-to-a-.csv-file"><i class="fa fa-check"></i><b>6.1</b> Basic exportation to a <code>.csv</code> file</a><ul>
<li class="chapter" data-level="6.1.1" data-path="local-data-import-and-export.html"><a href="local-data-import-and-export.html#other-options"><i class="fa fa-check"></i><b>6.1.1</b> Other options</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="local-data-import-and-export.html"><a href="local-data-import-and-export.html#reading-in-rectangular-data"><i class="fa fa-check"></i><b>6.2</b> Reading in rectangular data</a><ul>
<li class="chapter" data-level="6.2.1" data-path="local-data-import-and-export.html"><a href="local-data-import-and-export.html#traditional-importation"><i class="fa fa-check"></i><b>6.2.1</b> Traditional importation</a></li>
<li class="chapter" data-level="6.2.2" data-path="local-data-import-and-export.html"><a href="local-data-import-and-export.html#importation-options-to-know-about"><i class="fa fa-check"></i><b>6.2.2</b> Importation options to know about</a></li>
<li class="chapter" data-level="6.2.3" data-path="local-data-import-and-export.html"><a href="local-data-import-and-export.html#consider-the-readr-package"><i class="fa fa-check"></i><b>6.2.3</b> Consider the <code>readr</code> package</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="local-data-import-and-export.html"><a href="local-data-import-and-export.html#importing-data-from-other-programs"><i class="fa fa-check"></i><b>6.3</b> Importing data from other programs</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-joins.html"><a href="data-joins.html"><i class="fa fa-check"></i><b>7</b> Data joins</a><ul>
<li class="chapter" data-level="7.1" data-path="data-joins.html"><a href="data-joins.html#left-joins"><i class="fa fa-check"></i><b>7.1</b> Left joins</a></li>
<li class="chapter" data-level="7.2" data-path="data-joins.html"><a href="data-joins.html#inner-joins"><i class="fa fa-check"></i><b>7.2</b> Inner joins</a></li>
<li class="chapter" data-level="7.3" data-path="data-joins.html"><a href="data-joins.html#full-joins"><i class="fa fa-check"></i><b>7.3</b> Full joins</a></li>
<li class="chapter" data-level="7.4" data-path="data-joins.html"><a href="data-joins.html#anti-joins"><i class="fa fa-check"></i><b>7.4</b> Anti joins</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="reshaping-data-with-tidyr.html"><a href="reshaping-data-with-tidyr.html"><i class="fa fa-check"></i><b>8</b> Reshaping data with <code>tidyr</code></a><ul>
<li class="chapter" data-level="8.1" data-path="reshaping-data-with-tidyr.html"><a href="reshaping-data-with-tidyr.html#turning-long-data-into-wide"><i class="fa fa-check"></i><b>8.1</b> Turning long data into wide</a></li>
<li class="chapter" data-level="8.2" data-path="reshaping-data-with-tidyr.html"><a href="reshaping-data-with-tidyr.html#turning-wide-data-into-long"><i class="fa fa-check"></i><b>8.2</b> Turning wide data into long</a></li>
<li class="chapter" data-level="8.3" data-path="reshaping-data-with-tidyr.html"><a href="reshaping-data-with-tidyr.html#other-examples-we-talked-about"><i class="fa fa-check"></i><b>8.3</b> Other examples we talked about</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="regression-models.html"><a href="regression-models.html"><i class="fa fa-check"></i><b>9</b> Regression Models</a><ul>
<li class="chapter" data-level="9.1" data-path="regression-models.html"><a href="regression-models.html#simulating-fake-data"><i class="fa fa-check"></i><b>9.1</b> Simulating fake data</a></li>
<li class="chapter" data-level="9.2" data-path="regression-models.html"><a href="regression-models.html#fitting-regression-models"><i class="fa fa-check"></i><b>9.2</b> Fitting regression models</a><ul>
<li class="chapter" data-level="9.2.1" data-path="regression-models.html"><a href="regression-models.html#linear-regression"><i class="fa fa-check"></i><b>9.2.1</b> Linear regression</a></li>
<li class="chapter" data-level="9.2.2" data-path="regression-models.html"><a href="regression-models.html#logistic-regression"><i class="fa fa-check"></i><b>9.2.2</b> Logistic regression</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="regression-models.html"><a href="regression-models.html#other-ways-of-viewing-the-output"><i class="fa fa-check"></i><b>9.3</b> Other ways of viewing the output</a><ul>
<li class="chapter" data-level="9.3.1" data-path="regression-models.html"><a href="regression-models.html#glance"><i class="fa fa-check"></i><b>9.3.1</b> <code>glance()</code></a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="regression-models.html"><a href="regression-models.html#fitting-multiple-regressions-simultaneously"><i class="fa fa-check"></i><b>9.4</b> Fitting multiple regressions simultaneously</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="regression-models-1.html"><a href="regression-models-1.html"><i class="fa fa-check"></i><b>10</b> Regression Models</a><ul>
<li class="chapter" data-level="10.1" data-path="regression-models-1.html"><a href="regression-models-1.html#simulating-fake-data-1"><i class="fa fa-check"></i><b>10.1</b> Simulating fake data</a></li>
<li class="chapter" data-level="10.2" data-path="regression-models-1.html"><a href="regression-models-1.html#fitting-regression-models-1"><i class="fa fa-check"></i><b>10.2</b> Fitting regression models</a><ul>
<li class="chapter" data-level="10.2.1" data-path="regression-models-1.html"><a href="regression-models-1.html#linear-regression-1"><i class="fa fa-check"></i><b>10.2.1</b> Linear regression</a></li>
<li class="chapter" data-level="10.2.2" data-path="regression-models-1.html"><a href="regression-models-1.html#logistic-regression-1"><i class="fa fa-check"></i><b>10.2.2</b> Logistic regression</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="regression-models-1.html"><a href="regression-models-1.html#other-ways-of-viewing-the-output-1"><i class="fa fa-check"></i><b>10.3</b> Other ways of viewing the output</a><ul>
<li class="chapter" data-level="10.3.1" data-path="regression-models-1.html"><a href="regression-models-1.html#glance-1"><i class="fa fa-check"></i><b>10.3.1</b> <code>glance()</code></a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="regression-models-1.html"><a href="regression-models-1.html#fitting-multiple-regressions-simultaneously-1"><i class="fa fa-check"></i><b>10.4</b> Fitting multiple regressions simultaneously</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="anova-and-other-tests.html"><a href="anova-and-other-tests.html"><i class="fa fa-check"></i><b>11</b> ANOVA and other tests</a><ul>
<li class="chapter" data-level="11.1" data-path="anova-and-other-tests.html"><a href="anova-and-other-tests.html#t-tests"><i class="fa fa-check"></i><b>11.1</b> <em>t</em>-Tests</a></li>
<li class="chapter" data-level="11.2" data-path="anova-and-other-tests.html"><a href="anova-and-other-tests.html#correlation"><i class="fa fa-check"></i><b>11.2</b> Correlation</a><ul>
<li class="chapter" data-level="11.2.1" data-path="anova-and-other-tests.html"><a href="anova-and-other-tests.html#rank-correlations"><i class="fa fa-check"></i><b>11.2.1</b> Rank correlations</a></li>
<li class="chapter" data-level="11.2.2" data-path="anova-and-other-tests.html"><a href="anova-and-other-tests.html#significance-testing"><i class="fa fa-check"></i><b>11.2.2</b> Significance testing</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="anova-and-other-tests.html"><a href="anova-and-other-tests.html#anova"><i class="fa fa-check"></i><b>11.3</b> ANOVA</a><ul>
<li class="chapter" data-level="11.3.1" data-path="anova-and-other-tests.html"><a href="anova-and-other-tests.html#post-hoc-testing"><i class="fa fa-check"></i><b>11.3.1</b> Post hoc testing</a></li>
<li class="chapter" data-level="11.3.2" data-path="anova-and-other-tests.html"><a href="anova-and-other-tests.html#two-factors"><i class="fa fa-check"></i><b>11.3.2</b> Two-factors</a></li>
<li class="chapter" data-level="11.3.3" data-path="anova-and-other-tests.html"><a href="anova-and-other-tests.html#p-values"><i class="fa fa-check"></i><b>11.3.3</b> P-values</a></li>
<li class="chapter" data-level="11.3.4" data-path="anova-and-other-tests.html"><a href="anova-and-other-tests.html#interactions"><i class="fa fa-check"></i><b>11.3.4</b> Interactions</a></li>
<li class="chapter" data-level="11.3.5" data-path="anova-and-other-tests.html"><a href="anova-and-other-tests.html#plots"><i class="fa fa-check"></i><b>11.3.5</b> Plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="structural-equation-modeling.html"><a href="structural-equation-modeling.html"><i class="fa fa-check"></i><b>12</b> Structural Equation Modeling</a><ul>
<li class="chapter" data-level="12.1" data-path="structural-equation-modeling.html"><a href="structural-equation-modeling.html#confirmatory-factor-analysis"><i class="fa fa-check"></i><b>12.1</b> Confirmatory Factor Analysis</a><ul>
<li class="chapter" data-level="12.1.1" data-path="structural-equation-modeling.html"><a href="structural-equation-modeling.html#cfa-syntax"><i class="fa fa-check"></i><b>12.1.1</b> CFA syntax</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="structural-equation-modeling.html"><a href="structural-equation-modeling.html#full-structural-equation-models"><i class="fa fa-check"></i><b>12.2</b> Full Structural Equation Models</a></li>
<li class="chapter" data-level="12.3" data-path="structural-equation-modeling.html"><a href="structural-equation-modeling.html#additional-tricks"><i class="fa fa-check"></i><b>12.3</b> Additional tricks</a><ul>
<li class="chapter" data-level="12.3.1" data-path="structural-equation-modeling.html"><a href="structural-equation-modeling.html#missing-data"><i class="fa fa-check"></i><b>12.3.1</b> Missing data</a></li>
<li class="chapter" data-level="12.3.2" data-path="structural-equation-modeling.html"><a href="structural-equation-modeling.html#robus-estimators"><i class="fa fa-check"></i><b>12.3.2</b> Robus estimators</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="functionals.html"><a href="functionals.html"><i class="fa fa-check"></i><b>13</b> Functionals</a></li>
<li class="chapter" data-level="14" data-path="loops-functionals-and-simulation.html"><a href="loops-functionals-and-simulation.html"><i class="fa fa-check"></i><b>14</b> Loops, Functionals, and Simulation</a><ul>
<li class="chapter" data-level="14.1" data-path="loops-functionals-and-simulation.html"><a href="loops-functionals-and-simulation.html#loops"><i class="fa fa-check"></i><b>14.1</b> Loops</a><ul>
<li class="chapter" data-level="14.1.1" data-path="loops-functionals-and-simulation.html"><a href="loops-functionals-and-simulation.html#when-should-i-use-for-loops"><i class="fa fa-check"></i><b>14.1.1</b> When should I use for loops?</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="loops-functionals-and-simulation.html"><a href="loops-functionals-and-simulation.html#functionals-1"><i class="fa fa-check"></i><b>14.2</b> Functionals</a><ul>
<li class="chapter" data-level="14.2.1" data-path="loops-functionals-and-simulation.html"><a href="loops-functionals-and-simulation.html#the-base-r-way"><i class="fa fa-check"></i><b>14.2.1</b> The base R way</a></li>
<li class="chapter" data-level="14.2.2" data-path="loops-functionals-and-simulation.html"><a href="loops-functionals-and-simulation.html#sapply-and-unlisting"><i class="fa fa-check"></i><b>14.2.2</b> <code>sapply()</code> and Unlisting</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="loops-functionals-and-simulation.html"><a href="loops-functionals-and-simulation.html#the-tidyverse-functionals"><i class="fa fa-check"></i><b>14.3</b> The tidyverse functionals</a></li>
<li class="chapter" data-level="14.4" data-path="loops-functionals-and-simulation.html"><a href="loops-functionals-and-simulation.html#simulation"><i class="fa fa-check"></i><b>14.4</b> Simulation</a><ul>
<li class="chapter" data-level="14.4.1" data-path="loops-functionals-and-simulation.html"><a href="loops-functionals-and-simulation.html#a-worked-example"><i class="fa fa-check"></i><b>14.4.1</b> A worked example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="strings-and-text.html"><a href="strings-and-text.html"><i class="fa fa-check"></i><b>15</b> Strings and text</a><ul>
<li class="chapter" data-level="15.1" data-path="strings-and-text.html"><a href="strings-and-text.html#string-matching-and-substitution"><i class="fa fa-check"></i><b>15.1</b> String matching and substitution</a><ul>
<li class="chapter" data-level="15.1.1" data-path="strings-and-text.html"><a href="strings-and-text.html#fixed-true"><i class="fa fa-check"></i><b>15.1.1</b> <code>fixed = TRUE</code></a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="strings-and-text.html"><a href="strings-and-text.html#string-interpolation"><i class="fa fa-check"></i><b>15.2</b> String interpolation</a></li>
<li class="chapter" data-level="15.3" data-path="strings-and-text.html"><a href="strings-and-text.html#sentiment-analysis"><i class="fa fa-check"></i><b>15.3</b> Sentiment analysis</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="internet-data.html"><a href="internet-data.html"><i class="fa fa-check"></i><b>16</b> Internet data</a><ul>
<li class="chapter" data-level="16.1" data-path="internet-data.html"><a href="internet-data.html#api-background"><i class="fa fa-check"></i><b>16.1</b> API Background</a></li>
<li class="chapter" data-level="16.2" data-path="internet-data.html"><a href="internet-data.html#connecting-to-an-api"><i class="fa fa-check"></i><b>16.2</b> Connecting to an API</a></li>
<li class="chapter" data-level="16.3" data-path="internet-data.html"><a href="internet-data.html#working-with-api-data"><i class="fa fa-check"></i><b>16.3</b> Working with API data</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Textbook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="internet-data" class="section level1">
<h1><span class="header-section-number">16</span> Internet data</h1>
<p>One of the unique advantages that R has over traditional data analysis software is the ability to collect data from the Internet. It has many ways to do this, but we’ll focus on the use of APIs because they are especially popular and easy to use.</p>
<ol style="list-style-type: decimal">
<li>What is an API?</li>
<li>How do I connect to one?</li>
<li>How do I turn the data into an analyzable format?</li>
</ol>
<div id="api-background" class="section level2">
<h2><span class="header-section-number">16.1</span> API Background</h2>
<p>“API” is short for Application-programming interface. In short, it is a framework for using code to interact with some application. Most often, we are talking about RESTful APIs, which are a common kind of API that you can access on the internet. These APIs use web-links to send information to a server, that will then send you special information, depending on the link you gave it. If you have ever used participant-specific links in Qualtrics, this is a lot like that.</p>
<p>To see how this works, let’s look at the PredictIt.org API. PredictIt is a prediction market, where people place bets one political events that will happen in the future (e.g., that the next supreme court justice will leave the court by the end of the year, who will win the 2020 presidential race, etc.). Here, we focus on this API because it is especially easy to use and it doesn’t require you to register for anything (many do, but it’s often free).</p>
<p>When we go to <a href="https://www.predictit.org/">PredictIt.org</a>, we can see a number of popular betting markets. At the time this chapter was written, the most popular market was the Democratic Nominee market (i.e., who will be the US democratic nominee in 2020?). This market has several different options, as well as prices for each of these options (you can buy “yes” or “no” for any of them). The prices are determined by what people are willing to pay for them, so a higher price means more people believe that event will occurr. For example, Joe Biden is the highest at 28 cents, suggesting that on average the people in the market think he is most likely to win right now. Andrew Yang is also at a shockingly high 9 cents, which I admit I would not have predicted one year ago.</p>
<p>Wouldn’t it be nice if we could use code to get all these data into R to analyze? Here’s how.</p>
</div>
<div id="connecting-to-an-api" class="section level2">
<h2><span class="header-section-number">16.2</span> Connecting to an API</h2>
<p>Not all websites have APIs, but PredictIt does and you can <a href="https://predictit.freshdesk.com/support/solutions/articles/12000001878-does-predictit-make-market-data-available-via-an-api-">read about it here</a>. As the website explains, you can get all the data from their markets, but accessing a specific link:</p>
<ul>
<li><a href="https://www.predictit.org/api/marketdata/all/" class="uri">https://www.predictit.org/api/marketdata/all/</a></li>
</ul>
<p>Conveniently, if you navigate to that link with a webbrowser, you can see all the data. Unfortunately, it is in a really inconvenient format.</p>
<p>To get R to access the data for us, we need to use the <code>httr</code> package (“HTTR” for “hyper-text transfer request”).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&#39;httr&#39;</span>)</code></pre></div>
<p>Once we load the package, we simply tell R what website to <code>GET()</code> for us. In this case, that’s the link that PredictIt gave for their data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(httr)

api_url &lt;-<span class="st"> &#39;https://www.predictit.org/api/marketdata/all/&#39;</span>

predictit_data &lt;-<span class="st"> </span><span class="kw">GET</span>(api_url)</code></pre></div>
<p>The <code>predictit_data</code> object we made is large, so I won’t display it here. However, you’ll notice that it has several parts that you can explore in the top-right panel of RStudio.</p>
<p>What we care about first is the <code>status_code</code>, this should be 200. If it is anything else, the request didn’t work right.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">predictit_data<span class="op">$</span>status_code</code></pre></div>
<pre><code>## [1] 200</code></pre>
</div>
<div id="working-with-api-data" class="section level2">
<h2><span class="header-section-number">16.3</span> Working with API data</h2>
<p>This has all been great so far, but where are the data? Well, they come in binary format, which is not really human readable. For example, this is what the content of the server’s response looks like.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(predictit_data<span class="op">$</span>content, <span class="dt">n =</span> <span class="dv">100</span>)</code></pre></div>
<pre><code>##   [1] 7b 0d 0a 20 20 22 6d 61 72 6b 65 74 73 22 3a 20 5b 0d 0a 20 20 20 20
##  [24] 7b 0d 0a 20 20 20 20 20 20 22 69 64 22 3a 20 32 37 32 31 2c 0d 0a 20
##  [47] 20 20 20 20 20 22 6e 61 6d 65 22 3a 20 22 57 68 69 63 68 20 70 61 72
##  [70] 74 79 20 77 69 6c 6c 20 77 69 6e 20 74 68 65 20 32 30 32 30 20 55 2e
##  [93] 53 2e 20 70 72 65 73 69</code></pre>
<p>To turn it into a workable dataset, we need to use four steps.</p>
<ol style="list-style-type: decimal">
<li>Use the <code>content()</code> function from <code>httr</code>. This will give use our data in JSON format, which you can <a href="https://javaee.github.io/tutorial/jsonp001.html">read about here</a> (it’s popular, so you’ll see it again someday).</li>
<li>We can decode that JSON data using the <code>jsonlite::fromJSON()</code> command. The <code>jsonlite</code> package should already have come with R, but keep in mind you might need to install it.</li>
<li>Turn the result into a dataframe, which has one column that contains dataframes in it (take a look at “markets.contracts”).</li>
<li><code>unnest()</code> that list column so we have a regular old dataframe.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)

df &lt;-<span class="st"> </span>predictit_data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">content</span>(<span class="dt">as =</span> <span class="st">&#39;text&#39;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span>jsonlite<span class="op">::</span><span class="kw">fromJSON</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">as.data.frame</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">unnest</span>(markets.contracts)

<span class="kw">head</span>(df)</code></pre></div>
<pre><code>##   markets.id                                              markets.name
## 1       2721 Which party will win the 2020 U.S. presidential election?
## 2       2721 Which party will win the 2020 U.S. presidential election?
## 3       2721 Which party will win the 2020 U.S. presidential election?
## 4       2721 Which party will win the 2020 U.S. presidential election?
## 5       2747                Will Mark Cuban run for president in 2020?
## 6       2875              Will Andrew Cuomo run for president in 2020?
##                          markets.shortName
## 1 Which party wins the Presidency in 2020?
## 2 Which party wins the Presidency in 2020?
## 3 Which party wins the Presidency in 2020?
## 4 Which party wins the Presidency in 2020?
## 5                  Will Cuban run in 2020?
## 6                  Will Cuomo run in 2020?
##                                                                            markets.image
## 1 https://az620379.vo.msecnd.net/images/Markets/66c1cd46-cf5d-48a7-82ca-f6b11031e0ed.png
## 2 https://az620379.vo.msecnd.net/images/Markets/66c1cd46-cf5d-48a7-82ca-f6b11031e0ed.png
## 3 https://az620379.vo.msecnd.net/images/Markets/66c1cd46-cf5d-48a7-82ca-f6b11031e0ed.png
## 4 https://az620379.vo.msecnd.net/images/Markets/66c1cd46-cf5d-48a7-82ca-f6b11031e0ed.png
## 5 https://az620379.vo.msecnd.net/images/Markets/ac8830d9-a557-4fc0-9eab-fd50eefa4d6a.png
## 6 https://az620379.vo.msecnd.net/images/Markets/b8dc677d-e8a2-4795-8dad-0b9320b5140b.png
##                                                                                            markets.url
## 1 https://www.predictit.org/markets/detail/2721/Which-party-will-win-the-2020-US-presidential-election
## 2 https://www.predictit.org/markets/detail/2721/Which-party-will-win-the-2020-US-presidential-election
## 3 https://www.predictit.org/markets/detail/2721/Which-party-will-win-the-2020-US-presidential-election
## 4 https://www.predictit.org/markets/detail/2721/Which-party-will-win-the-2020-US-presidential-election
## 5              https://www.predictit.org/markets/detail/2747/Will-Mark-Cuban-run-for-president-in-2020
## 6            https://www.predictit.org/markets/detail/2875/Will-Andrew-Cuomo-run-for-president-in-2020
##             markets.timeStamp markets.status   id             dateEnd
## 1 2019-05-01T12:22:28.1560744           Open 4390                 N/A
## 2 2019-05-01T12:22:28.1560744           Open 4389                 N/A
## 3 2019-05-01T12:22:28.1560744           Open 4388                 N/A
## 4 2019-05-01T12:22:28.1560744           Open 4391                 N/A
## 5 2019-05-01T12:22:28.1560744           Open 4495 2020-11-03T23:59:00
## 6 2019-05-01T12:22:28.1560744           Open 5121 2020-11-03T00:00:00
##                                                                                            image
## 1 https://az620379.vo.msecnd.net/images/Contracts/small_dc2c8290-c5d5-4561-8c1a-31762c3972bb.png
## 2 https://az620379.vo.msecnd.net/images/Contracts/small_2482e38e-80aa-4ff0-b1e2-9c29a0f100bc.png
## 3 https://az620379.vo.msecnd.net/images/Contracts/small_9d46f92f-fc2d-406a-ade9-8cf2eb41e64e.png
## 4 https://az620379.vo.msecnd.net/images/Contracts/small_5a27f11b-6e7e-4dd6-9d6b-48dafd96b436.png
## 5 https://az620379.vo.msecnd.net/images/Contracts/small_ac8830d9-a557-4fc0-9eab-fd50eefa4d6a.png
## 6 https://az620379.vo.msecnd.net/images/Contracts/small_b8dc677d-e8a2-4795-8dad-0b9320b5140b.png
##                                           name
## 1                                   Democratic
## 2                                   Republican
## 3                                  Libertarian
## 4                                        Green
## 5   Will Mark Cuban run for president in 2020?
## 6 Will Andrew Cuomo run for president in 2020?
##                                                  longName
## 1  Will the Democratic Party win the White House in 2020?
## 2  Will the Republican Party win the White House in 2020?
## 3 Will the Libertarian Party win the White House in 2020?
## 4       Will the Green Party win the White House in 2020?
## 5              Will Mark Cuban run for president in 2020?
## 6            Will Andrew Cuomo run for president in 2020?
##                 shortName status lastTradePrice bestBuyYesCost
## 1              Democratic   Open           0.58           0.58
## 2              Republican   Open           0.44           0.45
## 3             Libertarian   Open           0.02           0.03
## 4                   Green   Open           0.02           0.03
## 5 Will Cuban run in 2020?   Open           0.09           0.12
## 6 Will Cuomo run in 2020?   Open           0.05           0.07
##   bestBuyNoCost bestSellYesCost bestSellNoCost lastClosePrice displayOrder
## 1          0.43            0.57           0.42           0.58            0
## 2          0.56            0.44           0.55           0.45            0
## 3          0.98            0.02           0.97           0.02            0
## 4          0.98            0.02           0.97           0.02            0
## 5          0.89            0.11           0.88           0.10            0
## 6          0.95            0.05           0.93           0.05            0</code></pre>
<p>Now that we’ve done all this work, let’s make a figure for the democratic nominee prices. Below, we look for the market we want in our <code>df</code>. In this case, it’s short name is “2020 Democratic nominee?”. We then sort rows by the last trade price for each nominee and take the top 5 (using <code>head()</code>). Using <code>ggplot()</code> we then look at the prices for the top 5 candidates. At the time of this writing, it looks like Biden is in a clear lead.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nominee_df &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(markets.shortName <span class="op">==</span><span class="st"> &#39;2020 Democratic nominee?&#39;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="op">-</span>lastTradePrice) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">head</span>(<span class="dt">n =</span> <span class="dv">5</span>)

<span class="kw">ggplot</span>(nominee_df, <span class="kw">aes</span>(name, lastTradePrice)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&#39;identity&#39;</span>)</code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-236-1.png" width="672" /></p>

</div>
</div>






            </section>

          </div>
        </div>
      </div>
<a href="strings-and-text.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
