<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>15 Strings and text | R Textbook</title>
  <meta name="description" content="This is the ‘organic’ textbook created by our class discussions and exercises.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="15 Strings and text | R Textbook" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is the ‘organic’ textbook created by our class discussions and exercises." />
  <meta name="github-repo" content="iancero/r-textbook-spring2019" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="15 Strings and text | R Textbook" />
  
  <meta name="twitter:description" content="This is the ‘organic’ textbook created by our class discussions and exercises." />
  

<meta name="author" content="Ian Cero’s CSP 518 Class">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="loops-functionals-and-simulation.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a></li>
<li class="chapter" data-level="2" data-path="basic-r.html"><a href="basic-r.html"><i class="fa fa-check"></i><b>2</b> Basic R</a><ul>
<li class="chapter" data-level="2.1" data-path="basic-r.html"><a href="basic-r.html#writing-in-r-and-rmarkdown"><i class="fa fa-check"></i><b>2.1</b> Writing in R and Rmarkdown</a><ul>
<li class="chapter" data-level="2.1.1" data-path="basic-r.html"><a href="basic-r.html#chatting-with-r"><i class="fa fa-check"></i><b>2.1.1</b> Chatting with R</a></li>
<li class="chapter" data-level="2.1.2" data-path="basic-r.html"><a href="basic-r.html#rmarkdown-tricks"><i class="fa fa-check"></i><b>2.1.2</b> Rmarkdown tricks</a></li>
<li class="chapter" data-level="2.1.3" data-path="basic-r.html"><a href="basic-r.html#code-blocks"><i class="fa fa-check"></i><b>2.1.3</b> Code blocks</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="basic-r.html"><a href="basic-r.html#variables"><i class="fa fa-check"></i><b>2.2</b> Variables</a><ul>
<li class="chapter" data-level="2.2.1" data-path="basic-r.html"><a href="basic-r.html#the-assignment-operator"><i class="fa fa-check"></i><b>2.2.1</b> The assignment operator</a></li>
<li class="chapter" data-level="2.2.2" data-path="basic-r.html"><a href="basic-r.html#numerics"><i class="fa fa-check"></i><b>2.2.2</b> Numerics</a></li>
<li class="chapter" data-level="2.2.3" data-path="basic-r.html"><a href="basic-r.html#characters"><i class="fa fa-check"></i><b>2.2.3</b> Characters</a></li>
<li class="chapter" data-level="2.2.4" data-path="basic-r.html"><a href="basic-r.html#booleans"><i class="fa fa-check"></i><b>2.2.4</b> Booleans</a></li>
<li class="chapter" data-level="2.2.5" data-path="basic-r.html"><a href="basic-r.html#special-types"><i class="fa fa-check"></i><b>2.2.5</b> Special types</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="basic-r.html"><a href="basic-r.html#vectors"><i class="fa fa-check"></i><b>2.3</b> Vectors</a></li>
<li class="chapter" data-level="2.4" data-path="basic-r.html"><a href="basic-r.html#lists"><i class="fa fa-check"></i><b>2.4</b> Lists</a></li>
<li class="chapter" data-level="2.5" data-path="basic-r.html"><a href="basic-r.html#dataframes"><i class="fa fa-check"></i><b>2.5</b> Dataframes</a><ul>
<li class="chapter" data-level="2.5.1" data-path="basic-r.html"><a href="basic-r.html#construction"><i class="fa fa-check"></i><b>2.5.1</b> Construction</a></li>
<li class="chapter" data-level="2.5.2" data-path="basic-r.html"><a href="basic-r.html#built-in-dataframes"><i class="fa fa-check"></i><b>2.5.2</b> Built-in dataframes</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="basic-r.html"><a href="basic-r.html#functions"><i class="fa fa-check"></i><b>2.6</b> Functions</a><ul>
<li class="chapter" data-level="2.6.1" data-path="basic-r.html"><a href="basic-r.html#getting-help"><i class="fa fa-check"></i><b>2.6.1</b> Getting help</a></li>
<li class="chapter" data-level="2.6.2" data-path="basic-r.html"><a href="basic-r.html#function-parameters"><i class="fa fa-check"></i><b>2.6.2</b> Function parameters</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="basic-r.html"><a href="basic-r.html#packages"><i class="fa fa-check"></i><b>2.7</b> Packages</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="visualization.html"><a href="visualization.html"><i class="fa fa-check"></i><b>3</b> Visualization</a><ul>
<li class="chapter" data-level="3.1" data-path="visualization.html"><a href="visualization.html#base-r"><i class="fa fa-check"></i><b>3.1</b> Base R</a></li>
<li class="chapter" data-level="3.2" data-path="visualization.html"><a href="visualization.html#ggplot"><i class="fa fa-check"></i><b>3.2</b> <code>ggplot</code></a><ul>
<li class="chapter" data-level="3.2.1" data-path="visualization.html"><a href="visualization.html#blank-ggplot-plot"><i class="fa fa-check"></i><b>3.2.1</b> Blank ggplot plot</a></li>
<li class="chapter" data-level="3.2.2" data-path="visualization.html"><a href="visualization.html#geoms"><i class="fa fa-check"></i><b>3.2.2</b> Geoms</a></li>
<li class="chapter" data-level="3.2.3" data-path="visualization.html"><a href="visualization.html#stat-functions"><i class="fa fa-check"></i><b>3.2.3</b> Stat Functions</a></li>
<li class="chapter" data-level="3.2.4" data-path="visualization.html"><a href="visualization.html#themes"><i class="fa fa-check"></i><b>3.2.4</b> Themes</a></li>
<li class="chapter" data-level="3.2.5" data-path="visualization.html"><a href="visualization.html#labels"><i class="fa fa-check"></i><b>3.2.5</b> Labels</a></li>
<li class="chapter" data-level="3.2.6" data-path="visualization.html"><a href="visualization.html#scales"><i class="fa fa-check"></i><b>3.2.6</b> Scales</a></li>
<li class="chapter" data-level="3.2.7" data-path="visualization.html"><a href="visualization.html#saving-your-plot"><i class="fa fa-check"></i><b>3.2.7</b> Saving your plot**</a></li>
<li class="chapter" data-level="3.2.8" data-path="visualization.html"><a href="visualization.html#facets"><i class="fa fa-check"></i><b>3.2.8</b> Facets</a></li>
<li class="chapter" data-level="3.2.9" data-path="visualization.html"><a href="visualization.html#where-to-learn-more"><i class="fa fa-check"></i><b>3.2.9</b> Where to learn more</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="functions-1.html"><a href="functions-1.html"><i class="fa fa-check"></i><b>4</b> Functions</a><ul>
<li class="chapter" data-level="4.1" data-path="functions-1.html"><a href="functions-1.html#basic-example"><i class="fa fa-check"></i><b>4.1</b> Basic Example</a></li>
<li class="chapter" data-level="4.2" data-path="functions-1.html"><a href="functions-1.html#anatomy-of-an-r-function"><i class="fa fa-check"></i><b>4.2</b> Anatomy of an R function</a></li>
<li class="chapter" data-level="4.3" data-path="functions-1.html"><a href="functions-1.html#base-r-functions"><i class="fa fa-check"></i><b>4.3</b> Base R functions</a><ul>
<li class="chapter" data-level="4.3.1" data-path="functions-1.html"><a href="functions-1.html#scoping"><i class="fa fa-check"></i><b>4.3.1</b> Scoping</a></li>
<li class="chapter" data-level="4.3.2" data-path="functions-1.html"><a href="functions-1.html#conditional-execution"><i class="fa fa-check"></i><b>4.3.2</b> Conditional execution</a></li>
<li class="chapter" data-level="4.3.3" data-path="functions-1.html"><a href="functions-1.html#the-return-command"><i class="fa fa-check"></i><b>4.3.3</b> the <code>return()</code> command</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="functions-1.html"><a href="functions-1.html#pipes"><i class="fa fa-check"></i><b>4.4</b> Pipes</a><ul>
<li class="chapter" data-level="4.4.1" data-path="functions-1.html"><a href="functions-1.html#basic-usage"><i class="fa fa-check"></i><b>4.4.1</b> Basic usage</a></li>
<li class="chapter" data-level="4.4.2" data-path="functions-1.html"><a href="functions-1.html#sending-the-lhs-to-another-parameter"><i class="fa fa-check"></i><b>4.4.2</b> Sending the LHS to another parameter</a></li>
<li class="chapter" data-level="4.4.3" data-path="functions-1.html"><a href="functions-1.html#convenient-magrittr-functions"><i class="fa fa-check"></i><b>4.4.3</b> Convenient magrittr functions</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="functions-1.html"><a href="functions-1.html#more-talk-about-the-help-files"><i class="fa fa-check"></i><b>4.5</b> More talk about the help files</a></li>
<li class="chapter" data-level="4.6" data-path="functions-1.html"><a href="functions-1.html#functions-from-other-packages"><i class="fa fa-check"></i><b>4.6</b> Functions from other packages</a></li>
<li class="chapter" data-level="4.7" data-path="functions-1.html"><a href="functions-1.html#section"><i class="fa fa-check"></i><b>4.7</b> </a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="dataframes-1.html"><a href="dataframes-1.html"><i class="fa fa-check"></i><b>5</b> Dataframes</a><ul>
<li class="chapter" data-level="5.1" data-path="dataframes-1.html"><a href="dataframes-1.html#storing-rectangular-data"><i class="fa fa-check"></i><b>5.1</b> Storing rectangular data</a><ul>
<li class="chapter" data-level="5.1.1" data-path="dataframes-1.html"><a href="dataframes-1.html#making-dataframes"><i class="fa fa-check"></i><b>5.1.1</b> Making dataframes</a></li>
<li class="chapter" data-level="5.1.2" data-path="dataframes-1.html"><a href="dataframes-1.html#strings-as-factors"><i class="fa fa-check"></i><b>5.1.2</b> Strings as factors</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="dataframes-1.html"><a href="dataframes-1.html#accessing-data-from-a-dataframe"><i class="fa fa-check"></i><b>5.2</b> Accessing data from a dataframe</a><ul>
<li class="chapter" data-level="5.2.1" data-path="dataframes-1.html"><a href="dataframes-1.html#basic-framework"><i class="fa fa-check"></i><b>5.2.1</b> Basic framework</a></li>
<li class="chapter" data-level="5.2.2" data-path="dataframes-1.html"><a href="dataframes-1.html#using-string-column-names"><i class="fa fa-check"></i><b>5.2.2</b> Using string column names</a></li>
<li class="chapter" data-level="5.2.3" data-path="dataframes-1.html"><a href="dataframes-1.html#using-the-operator"><i class="fa fa-check"></i><b>5.2.3</b> Using the <code>$</code> operator</a></li>
<li class="chapter" data-level="5.2.4" data-path="dataframes-1.html"><a href="dataframes-1.html#using-booleans"><i class="fa fa-check"></i><b>5.2.4</b> Using booleans</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="dataframes-1.html"><a href="dataframes-1.html#manupilating-data"><i class="fa fa-check"></i><b>5.3</b> Manupilating data</a></li>
<li class="chapter" data-level="5.4" data-path="dataframes-1.html"><a href="dataframes-1.html#using-dplyr-pipelines"><i class="fa fa-check"></i><b>5.4</b> Using <code>dplyr</code> pipelines</a><ul>
<li class="chapter" data-level="5.4.1" data-path="dataframes-1.html"><a href="dataframes-1.html#how-do-these-functions-work"><i class="fa fa-check"></i><b>5.4.1</b> How do these functions work?</a></li>
<li class="chapter" data-level="5.4.2" data-path="dataframes-1.html"><a href="dataframes-1.html#group_by"><i class="fa fa-check"></i><b>5.4.2</b> <code>group_by()</code></a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="dataframes-1.html"><a href="dataframes-1.html#dplyr-pipelines-with-the-magrittr"><i class="fa fa-check"></i><b>5.5</b> <code>dplyr</code> pipelines with the <code>magrittr</code> <code>%&gt;%</code></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="local-data-import-and-export.html"><a href="local-data-import-and-export.html"><i class="fa fa-check"></i><b>6</b> Local Data Import and Export</a><ul>
<li class="chapter" data-level="6.1" data-path="local-data-import-and-export.html"><a href="local-data-import-and-export.html#basic-exportation-to-a-.csv-file"><i class="fa fa-check"></i><b>6.1</b> Basic exportation to a <code>.csv</code> file</a><ul>
<li class="chapter" data-level="6.1.1" data-path="local-data-import-and-export.html"><a href="local-data-import-and-export.html#other-options"><i class="fa fa-check"></i><b>6.1.1</b> Other options</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="local-data-import-and-export.html"><a href="local-data-import-and-export.html#reading-in-rectangular-data"><i class="fa fa-check"></i><b>6.2</b> Reading in rectangular data</a><ul>
<li class="chapter" data-level="6.2.1" data-path="local-data-import-and-export.html"><a href="local-data-import-and-export.html#traditional-importation"><i class="fa fa-check"></i><b>6.2.1</b> Traditional importation</a></li>
<li class="chapter" data-level="6.2.2" data-path="local-data-import-and-export.html"><a href="local-data-import-and-export.html#importation-options-to-know-about"><i class="fa fa-check"></i><b>6.2.2</b> Importation options to know about</a></li>
<li class="chapter" data-level="6.2.3" data-path="local-data-import-and-export.html"><a href="local-data-import-and-export.html#consider-the-readr-package"><i class="fa fa-check"></i><b>6.2.3</b> Consider the <code>readr</code> package</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="local-data-import-and-export.html"><a href="local-data-import-and-export.html#importing-data-from-other-programs"><i class="fa fa-check"></i><b>6.3</b> Importing data from other programs</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-joins.html"><a href="data-joins.html"><i class="fa fa-check"></i><b>7</b> Data joins</a><ul>
<li class="chapter" data-level="7.1" data-path="data-joins.html"><a href="data-joins.html#left-joins"><i class="fa fa-check"></i><b>7.1</b> Left joins</a></li>
<li class="chapter" data-level="7.2" data-path="data-joins.html"><a href="data-joins.html#inner-joins"><i class="fa fa-check"></i><b>7.2</b> Inner joins</a></li>
<li class="chapter" data-level="7.3" data-path="data-joins.html"><a href="data-joins.html#full-joins"><i class="fa fa-check"></i><b>7.3</b> Full joins</a></li>
<li class="chapter" data-level="7.4" data-path="data-joins.html"><a href="data-joins.html#anti-joins"><i class="fa fa-check"></i><b>7.4</b> Anti joins</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="reshaping-data-with-tidyr.html"><a href="reshaping-data-with-tidyr.html"><i class="fa fa-check"></i><b>8</b> Reshaping data with <code>tidyr</code></a><ul>
<li class="chapter" data-level="8.1" data-path="reshaping-data-with-tidyr.html"><a href="reshaping-data-with-tidyr.html#turning-long-data-into-wide"><i class="fa fa-check"></i><b>8.1</b> Turning long data into wide</a></li>
<li class="chapter" data-level="8.2" data-path="reshaping-data-with-tidyr.html"><a href="reshaping-data-with-tidyr.html#turning-wide-data-into-long"><i class="fa fa-check"></i><b>8.2</b> Turning wide data into long</a></li>
<li class="chapter" data-level="8.3" data-path="reshaping-data-with-tidyr.html"><a href="reshaping-data-with-tidyr.html#other-examples-we-talked-about"><i class="fa fa-check"></i><b>8.3</b> Other examples we talked about</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="regression-models.html"><a href="regression-models.html"><i class="fa fa-check"></i><b>9</b> Regression Models</a><ul>
<li class="chapter" data-level="9.1" data-path="regression-models.html"><a href="regression-models.html#simulating-fake-data"><i class="fa fa-check"></i><b>9.1</b> Simulating fake data</a></li>
<li class="chapter" data-level="9.2" data-path="regression-models.html"><a href="regression-models.html#fitting-regression-models"><i class="fa fa-check"></i><b>9.2</b> Fitting regression models</a><ul>
<li class="chapter" data-level="9.2.1" data-path="regression-models.html"><a href="regression-models.html#linear-regression"><i class="fa fa-check"></i><b>9.2.1</b> Linear regression</a></li>
<li class="chapter" data-level="9.2.2" data-path="regression-models.html"><a href="regression-models.html#logistic-regression"><i class="fa fa-check"></i><b>9.2.2</b> Logistic regression</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="regression-models.html"><a href="regression-models.html#other-ways-of-viewing-the-output"><i class="fa fa-check"></i><b>9.3</b> Other ways of viewing the output</a><ul>
<li class="chapter" data-level="9.3.1" data-path="regression-models.html"><a href="regression-models.html#glance"><i class="fa fa-check"></i><b>9.3.1</b> <code>glance()</code></a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="regression-models.html"><a href="regression-models.html#fitting-multiple-regressions-simultaneously"><i class="fa fa-check"></i><b>9.4</b> Fitting multiple regressions simultaneously</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="regression-models-1.html"><a href="regression-models-1.html"><i class="fa fa-check"></i><b>10</b> Regression Models</a><ul>
<li class="chapter" data-level="10.1" data-path="regression-models-1.html"><a href="regression-models-1.html#simulating-fake-data-1"><i class="fa fa-check"></i><b>10.1</b> Simulating fake data</a></li>
<li class="chapter" data-level="10.2" data-path="regression-models-1.html"><a href="regression-models-1.html#fitting-regression-models-1"><i class="fa fa-check"></i><b>10.2</b> Fitting regression models</a><ul>
<li class="chapter" data-level="10.2.1" data-path="regression-models-1.html"><a href="regression-models-1.html#linear-regression-1"><i class="fa fa-check"></i><b>10.2.1</b> Linear regression</a></li>
<li class="chapter" data-level="10.2.2" data-path="regression-models-1.html"><a href="regression-models-1.html#logistic-regression-1"><i class="fa fa-check"></i><b>10.2.2</b> Logistic regression</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="regression-models-1.html"><a href="regression-models-1.html#other-ways-of-viewing-the-output-1"><i class="fa fa-check"></i><b>10.3</b> Other ways of viewing the output</a><ul>
<li class="chapter" data-level="10.3.1" data-path="regression-models-1.html"><a href="regression-models-1.html#glance-1"><i class="fa fa-check"></i><b>10.3.1</b> <code>glance()</code></a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="regression-models-1.html"><a href="regression-models-1.html#fitting-multiple-regressions-simultaneously-1"><i class="fa fa-check"></i><b>10.4</b> Fitting multiple regressions simultaneously</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="anova-and-other-tests.html"><a href="anova-and-other-tests.html"><i class="fa fa-check"></i><b>11</b> ANOVA and other tests</a><ul>
<li class="chapter" data-level="11.1" data-path="anova-and-other-tests.html"><a href="anova-and-other-tests.html#t-tests"><i class="fa fa-check"></i><b>11.1</b> <em>t</em>-Tests</a></li>
<li class="chapter" data-level="11.2" data-path="anova-and-other-tests.html"><a href="anova-and-other-tests.html#correlation"><i class="fa fa-check"></i><b>11.2</b> Correlation</a><ul>
<li class="chapter" data-level="11.2.1" data-path="anova-and-other-tests.html"><a href="anova-and-other-tests.html#rank-correlations"><i class="fa fa-check"></i><b>11.2.1</b> Rank correlations</a></li>
<li class="chapter" data-level="11.2.2" data-path="anova-and-other-tests.html"><a href="anova-and-other-tests.html#significance-testing"><i class="fa fa-check"></i><b>11.2.2</b> Significance testing</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="anova-and-other-tests.html"><a href="anova-and-other-tests.html#anova"><i class="fa fa-check"></i><b>11.3</b> ANOVA</a><ul>
<li class="chapter" data-level="11.3.1" data-path="anova-and-other-tests.html"><a href="anova-and-other-tests.html#post-hoc-testing"><i class="fa fa-check"></i><b>11.3.1</b> Post hoc testing</a></li>
<li class="chapter" data-level="11.3.2" data-path="anova-and-other-tests.html"><a href="anova-and-other-tests.html#two-factors"><i class="fa fa-check"></i><b>11.3.2</b> Two-factors</a></li>
<li class="chapter" data-level="11.3.3" data-path="anova-and-other-tests.html"><a href="anova-and-other-tests.html#p-values"><i class="fa fa-check"></i><b>11.3.3</b> P-values</a></li>
<li class="chapter" data-level="11.3.4" data-path="anova-and-other-tests.html"><a href="anova-and-other-tests.html#interactions"><i class="fa fa-check"></i><b>11.3.4</b> Interactions</a></li>
<li class="chapter" data-level="11.3.5" data-path="anova-and-other-tests.html"><a href="anova-and-other-tests.html#plots"><i class="fa fa-check"></i><b>11.3.5</b> Plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="structural-equation-modeling.html"><a href="structural-equation-modeling.html"><i class="fa fa-check"></i><b>12</b> Structural Equation Modeling</a><ul>
<li class="chapter" data-level="12.1" data-path="structural-equation-modeling.html"><a href="structural-equation-modeling.html#confirmatory-factor-analysis"><i class="fa fa-check"></i><b>12.1</b> Confirmatory Factor Analysis</a><ul>
<li class="chapter" data-level="12.1.1" data-path="structural-equation-modeling.html"><a href="structural-equation-modeling.html#cfa-syntax"><i class="fa fa-check"></i><b>12.1.1</b> CFA syntax</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="structural-equation-modeling.html"><a href="structural-equation-modeling.html#full-structural-equation-models"><i class="fa fa-check"></i><b>12.2</b> Full Structural Equation Models</a></li>
<li class="chapter" data-level="12.3" data-path="structural-equation-modeling.html"><a href="structural-equation-modeling.html#additional-tricks"><i class="fa fa-check"></i><b>12.3</b> Additional tricks</a><ul>
<li class="chapter" data-level="12.3.1" data-path="structural-equation-modeling.html"><a href="structural-equation-modeling.html#missing-data"><i class="fa fa-check"></i><b>12.3.1</b> Missing data</a></li>
<li class="chapter" data-level="12.3.2" data-path="structural-equation-modeling.html"><a href="structural-equation-modeling.html#robus-estimators"><i class="fa fa-check"></i><b>12.3.2</b> Robus estimators</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="functionals.html"><a href="functionals.html"><i class="fa fa-check"></i><b>13</b> Functionals</a></li>
<li class="chapter" data-level="14" data-path="loops-functionals-and-simulation.html"><a href="loops-functionals-and-simulation.html"><i class="fa fa-check"></i><b>14</b> Loops, Functionals, and Simulation</a><ul>
<li class="chapter" data-level="14.1" data-path="loops-functionals-and-simulation.html"><a href="loops-functionals-and-simulation.html#loops"><i class="fa fa-check"></i><b>14.1</b> Loops</a><ul>
<li class="chapter" data-level="14.1.1" data-path="loops-functionals-and-simulation.html"><a href="loops-functionals-and-simulation.html#when-should-i-use-for-loops"><i class="fa fa-check"></i><b>14.1.1</b> When should I use for loops?</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="loops-functionals-and-simulation.html"><a href="loops-functionals-and-simulation.html#functionals-1"><i class="fa fa-check"></i><b>14.2</b> Functionals</a><ul>
<li class="chapter" data-level="14.2.1" data-path="loops-functionals-and-simulation.html"><a href="loops-functionals-and-simulation.html#the-base-r-way"><i class="fa fa-check"></i><b>14.2.1</b> The base R way</a></li>
<li class="chapter" data-level="14.2.2" data-path="loops-functionals-and-simulation.html"><a href="loops-functionals-and-simulation.html#sapply-and-unlisting"><i class="fa fa-check"></i><b>14.2.2</b> <code>sapply()</code> and Unlisting</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="loops-functionals-and-simulation.html"><a href="loops-functionals-and-simulation.html#the-tidyverse-functionals"><i class="fa fa-check"></i><b>14.3</b> The tidyverse functionals</a></li>
<li class="chapter" data-level="14.4" data-path="loops-functionals-and-simulation.html"><a href="loops-functionals-and-simulation.html#simulation"><i class="fa fa-check"></i><b>14.4</b> Simulation</a><ul>
<li class="chapter" data-level="14.4.1" data-path="loops-functionals-and-simulation.html"><a href="loops-functionals-and-simulation.html#a-worked-example"><i class="fa fa-check"></i><b>14.4.1</b> A worked example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="strings-and-text.html"><a href="strings-and-text.html"><i class="fa fa-check"></i><b>15</b> Strings and text</a><ul>
<li class="chapter" data-level="15.1" data-path="strings-and-text.html"><a href="strings-and-text.html#string-matching-and-substitution"><i class="fa fa-check"></i><b>15.1</b> String matching and substitution</a><ul>
<li class="chapter" data-level="15.1.1" data-path="strings-and-text.html"><a href="strings-and-text.html#fixed-true"><i class="fa fa-check"></i><b>15.1.1</b> <code>fixed = TRUE</code></a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="strings-and-text.html"><a href="strings-and-text.html#string-interpolation"><i class="fa fa-check"></i><b>15.2</b> String interpolation</a></li>
<li class="chapter" data-level="15.3" data-path="strings-and-text.html"><a href="strings-and-text.html#sentiment-analysis"><i class="fa fa-check"></i><b>15.3</b> Sentiment analysis</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Textbook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="strings-and-text" class="section level1">
<h1><span class="header-section-number">15</span> Strings and text</h1>
<p>One of the greatest advantages of working with R (indeed, with any programming language) over a traditional GUI-based program (e.g., SPSS) is the ability to work with text. Although a sentiment analysis might be possible with SPSS, you’re limited to whatever functions are built in to those programs. In R, you have much more control.</p>
<p>There are a lot of aspects of text manipulation and analysis, so we will focus on the basics today:</p>
<ol style="list-style-type: decimal">
<li>String matching and substitution</li>
<li>String interpolation</li>
<li>Basic sentiment analysis</li>
</ol>
<div id="string-matching-and-substitution" class="section level2">
<h2><span class="header-section-number">15.1</span> String matching and substitution</h2>
<p>This is the bread and butter of working with character strings. If you use R, you will likely be doing it all the time. <strong>String matching</strong> is when I test whether some target string of interest is inside my text. For that, we use the <code>grepl()</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">target_hashtag &lt;-<span class="st"> &#39;#footwear&#39;</span>
some_tweet &lt;-<span class="st"> &#39;I wish I had better shoes #footwear&#39;</span>

<span class="co"># is the target hashtag in the tweet?</span>
<span class="kw">grepl</span>(<span class="dt">pattern =</span> target_hashtag, <span class="dt">x =</span> some_tweet)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p><strong>String subtitution</strong> is when I replace all cases of a target string inside my text. For that, we use <code>gsub()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">new_hashtag &lt;-<span class="st"> &#39;#betterHashtag&#39;</span>

<span class="kw">gsub</span>(<span class="dt">pattern =</span> target_hashtag, <span class="dt">replacement =</span> new_hashtag, some_tweet)</code></pre></div>
<pre><code>## [1] &quot;I wish I had better shoes #betterHashtag&quot;</code></pre>
<div id="fixed-true" class="section level3">
<h3><span class="header-section-number">15.1.1</span> <code>fixed = TRUE</code></h3>
<p>Sometimes, your <code>grepl()</code> and <code>gsub()</code> commands will produce odd results. The reason for that is they are actually searching for what are called <strong>Regular Expressions</strong> (ways of defining more abstract patterns of text). Those are unfortunately beyond the scope of what we are doing here, but you can ensure regular expressions are not being used by setting <code>fixed = T</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">new_hashtag &lt;-<span class="st"> &#39;#betterHashtag&#39;</span>

<span class="kw">gsub</span>(<span class="dt">pattern =</span> target_hashtag, <span class="dt">replacement =</span> new_hashtag, some_tweet, <span class="dt">fixed =</span> T)</code></pre></div>
<pre><code>## [1] &quot;I wish I had better shoes #betterHashtag&quot;</code></pre>
<p>This will also have the advantage of making your code faster, when you are working with many pieces of text.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_tweets &lt;-<span class="st"> </span><span class="kw">c</span>(
  <span class="st">&#39;Here is the first tweet #tweet&#39;</span>,
  <span class="st">&#39;Another case of tweeting #tweet&#39;</span>,
  <span class="st">&#39;Im just lurking&#39;</span>)

<span class="kw">grepl</span>(<span class="st">&#39;#tweet&#39;</span>, my_tweets, <span class="dt">fixed =</span> T)</code></pre></div>
<pre><code>## [1]  TRUE  TRUE FALSE</code></pre>
</div>
</div>
<div id="string-interpolation" class="section level2">
<h2><span class="header-section-number">15.2</span> String interpolation</h2>
<p>The base R functions like <code>gsub()</code> are great for basic string modification tasks. But what if I need a function to write several pieces of text, changing the same thing each time? For example, what if I need to write a series of emails, reminding people to show up to their appointments?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">appointment_df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(
  <span class="dt">name =</span> <span class="kw">c</span>(<span class="st">&#39;Alice&#39;</span>, <span class="st">&#39;Bob&#39;</span>, <span class="st">&#39;Chantal&#39;</span>),
  <span class="dt">date =</span> <span class="kw">c</span>(<span class="st">&#39;Jan 1&#39;</span>, <span class="st">&#39;Feb 2&#39;</span>, <span class="st">&#39;Mar 3&#39;</span>),
  <span class="dt">time =</span> <span class="kw">c</span>(<span class="st">&#39;1:00&#39;</span>, <span class="st">&#39;2:00&#39;</span>, <span class="st">&#39;3:00&#39;</span>)
)

appointment_df</code></pre></div>
<pre><code>##      name  date time
## 1   Alice Jan 1 1:00
## 2     Bob Feb 2 2:00
## 3 Chantal Mar 3 3:00</code></pre>
<p>For that, I can use the <code>glue</code> package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&#39;glue&#39;</span>)</code></pre></div>
<p>This package allows you to format a string to be ready for <strong>interpolation</strong> - it is ready for something else to be injected into it. Just add squiggle brackets (<code>{}</code>) and a variable name for whatever you want to replace.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(glue)

template &lt;-<span class="st"> &#39;Hello, my name is {name} and Im feeling {mood}&#39;</span>
<span class="kw">glue</span>(template, <span class="dt">name =</span> <span class="st">&#39;Ian&#39;</span>, <span class="dt">mood =</span> <span class="st">&#39;exuberant&#39;</span>)</code></pre></div>
<pre><code>## Hello, my name is Ian and Im feeling exuberant</code></pre>
<p>This package also has a special function called <code>glue_data()</code>, which will apply your template to every row of your dataframe, using the existing columns as its input. We can use that to write out our appointment reminders all at once. This reduces the work burden and the likelihood of a mistake.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">email_template &lt;-<span class="st"> &#39;Hello {name}, you have an appointment on {date} at {time}.&#39;</span>

<span class="kw">glue_data</span>(appointment_df, email_template)</code></pre></div>
<pre><code>## Hello Alice, you have an appointment on Jan 1 at 1:00.
## Hello Bob, you have an appointment on Feb 2 at 2:00.
## Hello Chantal, you have an appointment on Mar 3 at 3:00.</code></pre>
</div>
<div id="sentiment-analysis" class="section level2">
<h2><span class="header-section-number">15.3</span> Sentiment analysis</h2>
<p>This is the branch of Natural Language Processing that tries to determine the tone or attitude of a set of text. There are a few basic steps. First we need a <strong>lexicon</strong>, which is kind of like a dictionary, but instead of definitions for words, it provides their numeric sentiment (usually produced by having people rate the words for how “positive” or “negative” they are). Let’s imagine a basic lexicon that might be applied to cats.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lexicon_df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(
  <span class="dt">word =</span> <span class="kw">c</span>(<span class="st">&#39;fluffy&#39;</span>, <span class="st">&#39;cute&#39;</span>, <span class="st">&#39;grumpy&#39;</span>),
  <span class="dt">sentiment =</span> <span class="kw">c</span>(.<span class="dv">51</span>, .<span class="dv">76</span>, <span class="op">-</span>.<span class="dv">28</span>),
  <span class="dt">stringsAsFactors =</span> F)

lexicon_df</code></pre></div>
<pre><code>##     word sentiment
## 1 fluffy      0.51
## 2   cute      0.76
## 3 grumpy     -0.28</code></pre>
<p>Most lexicons have several thousand words in them, at least. However, this will work for our example.</p>
<p>After a lexicon is built, we need a <strong>corpus</strong> - a body of text - to analyze. Often, this is actually a collection of bodies of text (e.g., many tweets or books, maybe newspapers). Let’s imagine we have a few tweets from some cat owners.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tweet_corpus &lt;-<span class="st"> </span><span class="kw">data.frame</span>(
  <span class="dt">person =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,
  <span class="dt">tweet =</span> <span class="kw">c</span>(
    <span class="st">&#39;Today, my fluffy cat was acting so cute!&#39;</span>,
    <span class="st">&#39;My cat is always grumpy&#39;</span>,
    <span class="st">&#39;I think all kinds of cats are cute.&#39;</span>),
  <span class="dt">stringsAsFactors =</span> F)

tweet_corpus</code></pre></div>
<pre><code>##   person                                    tweet
## 1      1 Today, my fluffy cat was acting so cute!
## 2      2                  My cat is always grumpy
## 3      3      I think all kinds of cats are cute.</code></pre>
<p>There are many ways to proceed from here, but the easiest (and frankly one of the safest) includes using the <code>tidytext</code> package. This package has several text analysis functions designed to play nice with the <code>tidyverse</code> functions we know and love.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&#39;tidytext&#39;</span>)</code></pre></div>
<p>This package makes it easy to break our text into seperate words, then use a <code>left_join()</code> to get each word’s sentiment score into our dataframe. We’ll do this in two steps to make it clearer what is happening.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
<span class="kw">library</span>(tidytext)

df &lt;-<span class="st"> </span>tweet_corpus <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">unnest_tokens</span>(<span class="dt">output =</span> word, <span class="dt">input =</span> tweet)

<span class="kw">head</span>(df, <span class="dt">n =</span> <span class="dv">10</span>)</code></pre></div>
<pre><code>##     person   word
## 1        1  today
## 1.1      1     my
## 1.2      1 fluffy
## 1.3      1    cat
## 1.4      1    was
## 1.5      1 acting
## 1.6      1     so
## 1.7      1   cute
## 2        2     my
## 2.1      2    cat</code></pre>
<p>Now let’s use a left_join to make a sentiment column.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">left_join</span>(lexicon_df, <span class="dt">by =</span> <span class="st">&#39;word&#39;</span>)

<span class="kw">head</span>(df, <span class="dt">n =</span> <span class="dv">10</span>)</code></pre></div>
<pre><code>##    person   word sentiment
## 1       1  today        NA
## 2       1     my        NA
## 3       1 fluffy      0.51
## 4       1    cat        NA
## 5       1    was        NA
## 6       1 acting        NA
## 7       1     so        NA
## 8       1   cute      0.76
## 9       2     my        NA
## 10      2    cat        NA</code></pre>
<p>Of course, we are using a small lexicon that doesn’t have values for most of these words, so they end up missing. That’s just fine here, not all words need to have a value to guess the sentiment of the overall text. To finish our analysis, lets group up our text by tweet, then take the mean sentiments.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(person) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(
    <span class="dt">tweet =</span> <span class="kw">paste</span>(word, <span class="dt">collapse =</span> <span class="st">&#39; &#39;</span>), <span class="co"># put tweet back together</span>
    <span class="dt">sentiment =</span> <span class="kw">mean</span>(sentiment, <span class="dt">na.rm =</span> T))</code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   person tweet                                  sentiment
##    &lt;int&gt; &lt;chr&gt;                                      &lt;dbl&gt;
## 1      1 today my fluffy cat was acting so cute     0.635
## 2      2 my cat is always grumpy                   -0.28 
## 3      3 i think all kinds of cats are cute         0.76</code></pre>

</div>
</div>






            </section>

          </div>
        </div>
      </div>
<a href="loops-functionals-and-simulation.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
